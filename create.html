<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Bio Link - Furgus</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
            color: white;
            position: relative;
        }

        /* Plaid background patterns - actual crosshatch plaid */
        .plaid-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .bg-red .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #ff6348;
        }
        .bg-purple .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #667eea;
        }
        .bg-pink .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #ff6b6b;
        }
        .bg-blue .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #48dbfb;
        }
        .bg-green .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #26de81;
        }
        .bg-orange .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #feca57;
        }
        .bg-teal .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #00d2d3;
        }
        .bg-indigo .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #5f27cd;
        }
        .bg-yellow .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #f9ca24;
        }
        .bg-emerald .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #00b894;
        }
        .bg-violet .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #a29bfe;
        }
        .bg-rose .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #fd79a8;
        }
        .bg-sky .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #74b9ff;
        }
        .bg-lime .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #a4b0be;
        }
        .bg-black .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(255,255,255,0.1) 35px, rgba(255,255,255,0.1) 40px, transparent 40px, transparent 60px, rgba(255,255,255,0.15) 60px, rgba(255,255,255,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(255,255,255,0.1) 35px, rgba(255,255,255,0.1) 40px, transparent 40px, transparent 60px, rgba(255,255,255,0.15) 60px, rgba(255,255,255,0.15) 65px),
                #2c2c54;
        }
        .bg-gray .plaid-bg { 
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(0,0,0,0.1) 35px, rgba(0,0,0,0.1) 40px, transparent 40px, transparent 60px, rgba(0,0,0,0.15) 60px, rgba(0,0,0,0.15) 65px),
                #57606f;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .logo {
            width: 100px;
            height: auto;
        }

        .editor-container {
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            padding: 2.5rem;
            border: 2px solid #333;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            color: white;
        }

        .form-section {
            margin-bottom: 2.5rem;
        }

        .section-title {
            font-size: 1.4rem;
            margin-bottom: 1.5rem;
            color: white;
            border-bottom: 2px solid #666;
            padding-bottom: 0.5rem;
            font-weight: 700;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            font-size: 1rem;
            color: white;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid #666;
            border-radius: 8px;
            background: #2a2a2a;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            background: #333;
            border-color: #888;
        }

        .form-group input::placeholder, .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.5);
            font-weight: 400;
        }

        .username-status {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            min-height: 20px;
            color: white;
        }

        .profile-pic-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .profile-pic-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .profile-pic-preview:hover {
            border-color: rgba(255, 255, 255, 0.5);
        }

        .file-input-wrapper {
            position: relative;
            display: inline-block;
        }

        .file-input-wrapper input[type=file] {
            position: absolute;
            left: -9999px;
        }

        .file-input-label {
            background: #48dbfb;
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            font-weight: 600;
            border: 2px solid #333;
        }

        .file-input-label:hover {
            background: #0abde3;
        }

        .color-palette {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(50px, 1fr));
            gap: 0.8rem;
            margin-top: 1rem;
        }

        .color-option {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .color-option:hover {
            transform: scale(1.05);
        }

        .color-option.selected {
            border-color: white;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .links-section {
            margin-top: 1rem;
        }

        #linksList {
            min-height: 100px;
        }

        .link-item {
            background: #1a1a1a;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 2px solid #666;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            cursor: move;
            transition: all 0.3s ease;
        }

        .link-item:hover {
            border-color: #888;
        }

        .link-item.dragging {
            opacity: 0.5;
            transform: rotate(2deg);
        }

        .link-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .link-number {
            background: white;
            color: black;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .drag-handle {
            cursor: grab;
            font-size: 1.2rem;
            color: #888;
            padding: 0.5rem;
        }

        .drag-handle:hover {
            color: white;
        }

        .remove-link {
            background: #ff6b6b;
            border: 2px solid #333;
            color: white;
            padding: 0.5rem 0.8rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .remove-link:hover {
            background: #ff5252;
        }

        .link-inputs {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .link-inputs input, .link-inputs select {
            background: #2a2a2a;
            border: 2px solid #666;
            padding: 0.8rem;
            border-radius: 6px;
            color: white;
            font-size: 0.95rem;
            font-weight: 500;
        }

        .generated-url {
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: #26de81;
            font-weight: 500;
        }

        .add-link-btn {
            background: #48dbfb;
            border: 2px solid #333;
            color: white;
            padding: 1rem 2rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
        }

        .add-link-btn:hover {
            background: #0abde3;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 3rem;
            flex-wrap: wrap;
        }

        .save-btn, .view-profile-btn, .sign-out-btn, .home-btn {
            padding: 1rem 2rem;
            border: 2px solid #333;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .save-btn {
            background: #26de81;
            color: white;
        }

        .view-profile-btn {
            background: #ff6b6b;
            color: white;
        }

        .sign-out-btn {
            background: #57606f;
            color: white;
        }

        .home-btn {
            background: #feca57;
            color: #000;
        }

        .save-btn:hover, .view-profile-btn:hover, .sign-out-btn:hover, .home-btn:hover {
            opacity: 0.9;
        }

        .custom-limit-warning {
            background: rgba(255, 202, 87, 0.2);
            border: 1px solid #feca57;
            border-radius: 8px;
            padding: 0.8rem;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #feca57;
        }

        /* Background color classes */
        .bg-red { background: linear-gradient(135deg, #ff6348 0%, #ff7675 100%); }
        .bg-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .bg-pink { background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%); }
        .bg-blue { background: linear-gradient(135deg, #48dbfb 0%, #0abde3 100%); }
        .bg-green { background: linear-gradient(135deg, #26de81 0%, #20bf6b 100%); }
        .bg-orange { background: linear-gradient(135deg, #feca57 0%, #ff9ff3 100%); }
        .bg-teal { background: linear-gradient(135deg, #00d2d3 0%, #54a0ff 100%); }
        .bg-indigo { background: linear-gradient(135deg, #5f27cd 0%, #341f97 100%); }
        .bg-yellow { background: linear-gradient(135deg, #f9ca24 0%, #f0932b 100%); }
        .bg-emerald { background: linear-gradient(135deg, #00b894 0%, #00cec9 100%); }
        .bg-violet { background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%); }
        .bg-rose { background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%); }
        .bg-sky { background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); }
        .bg-lime { background: linear-gradient(135deg, #a4b0be 0%, #57606f 100%); }
        .bg-black { background: linear-gradient(135deg, #2c2c54 0%, #40407a 100%); }
        .bg-gray { background: linear-gradient(135deg, #57606f 0%, #2f3542 100%); }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            
            .editor-container {
                padding: 1.5rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .color-palette {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>
</head>
<body class="bg-red">
    <div class="plaid-bg"></div>
    <div class="container">
        <div class="header">
            <img src="MWF.png" alt="Furgus" class="logo">
        </div>
        
        <div class="editor-container">
            <div class="form-section">
                <h3 class="section-title">Profile Information</h3>
                
                <div class="form-group">
                    <label>Profile Picture</label>
                    <div class="profile-pic-section">
                        <img id="previewPic" src="assets/default.png" alt="Profile" class="profile-pic-preview">
                        <div class="file-input-wrapper">
                            <input type="file" id="profilePicInput" accept="image/*" onchange="handleProfilePicUpload(event)">
                            <label for="profilePicInput" class="file-input-label">Choose Photo</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Display Name *</label>
                    <input type="text" id="displayName" placeholder="Your Name" maxlength="50" required>
                </div>

                <div class="form-group">
                    <label>Bio</label>
                    <textarea id="profileBio" placeholder="Tell people about yourself..." maxlength="150" rows="3"></textarea>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem; text-align: right; color: white; font-weight: 500;">
                        <span id="bioCharCount">0</span>/150 characters
                    </div>
                </div>

                <div class="form-group">
                    <label>Username * (furgus.org/yourname)</label>
                    <input type="text" id="username" placeholder="yourname" maxlength="30" onblur="checkUsernameAvailability()" required>
                    <div id="usernameStatus" class="username-status"></div>
                </div>

                <div class="form-group">
                    <label>Background Color</label>
                    <div class="color-palette">
                        <div class="color-option bg-red selected" data-color="red" title="Red"></div>
                        <div class="color-option bg-purple" data-color="purple" title="Purple"></div>
                        <div class="color-option bg-pink" data-color="pink" title="Pink"></div>
                        <div class="color-option bg-blue" data-color="blue" title="Blue"></div>
                        <div class="color-option bg-green" data-color="green" title="Green"></div>
                        <div class="color-option bg-orange" data-color="orange" title="Orange"></div>
                        <div class="color-option bg-teal" data-color="teal" title="Teal"></div>
                        <div class="color-option bg-indigo" data-color="indigo" title="Indigo"></div>
                        <div class="color-option bg-yellow" data-color="yellow" title="Yellow"></div>
                        <div class="color-option bg-emerald" data-color="emerald" title="Emerald"></div>
                        <div class="color-option bg-violet" data-color="violet" title="Violet"></div>
                        <div class="color-option bg-rose" data-color="rose" title="Rose"></div>
                        <div class="color-option bg-sky" data-color="sky" title="Sky"></div>
                        <div class="color-option bg-lime" data-color="lime" title="Lime"></div>
                        <div class="color-option bg-black" data-color="black" title="Black"></div>
                        <div class="color-option bg-gray" data-color="gray" title="Gray"></div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h3 class="section-title">Social Links</h3>
                <div id="linksList" class="links-section">
                    <!-- Links will be added here -->
                </div>
                <button class="add-link-btn" onclick="addLinkItem()">+ Add Link</button>
            </div>

            <div class="action-buttons">
                <button class="save-btn" onclick="saveProfile()">Save Profile</button>
                <button class="view-profile-btn" onclick="viewProfile()">View Profile</button>
                <a href="/" class="home-btn">Go Home</a>
                <button class="sign-out-btn" onclick="signOut()">Sign Out</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut as firebaseSignOut } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAvcAd9o-HGRGRpW4b-gocl11vVrXiON
